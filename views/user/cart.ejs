<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from caketheme.com/html/ruper/shop-cart.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 26 Jan 2024 08:52:33 GMT -->

<head>
	<!-- Meta Data -->
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>FURNIX</title>

	<!-- Favicon -->
	<link rel="icon" type="image/png" sizes="32x32" href="media/favicon-16x16.png">


	<!-- Dependency Styles -->
	<link rel="stylesheet" href="libs/bootstrap/css/bootstrap.min.css" type="text/css">
	<link rel="stylesheet" href="libs/feather-font/css/iconfont.css" type="text/css">
	<link rel="stylesheet" href="libs/icomoon-font/css/icomoon.css" type="text/css">
	<link rel="stylesheet" href="libs/font-awesome/css/font-awesome.css" type="text/css">
	<link rel="stylesheet" href="libs/wpbingofont/css/wpbingofont.css" type="text/css">
	<link rel="stylesheet" href="libs/elegant-icons/css/elegant.css" type="text/css">
	<link rel="stylesheet" href="libs/slick/css/slick.css" type="text/css">
	<link rel="stylesheet" href="libs/slick/css/slick-theme.css" type="text/css">
	<link rel="stylesheet" href="libs/mmenu/css/mmenu.min.css" type="text/css">
	<link rel="stylesheet" href="libs/slider/css/jslider.css">

	<!-- Site Stylesheet -->
	<link rel="stylesheet" href="assets/css/app.css" type="text/css">
	<link rel="stylesheet" href="assets/css/responsive.css" type="text/css">

	<!-- Google Web Fonts -->
	<link
		href="https://fonts.googleapis.com/css2?family=Barlow+Semi+Condensed:wght@100;200;300;400;500;600;700&amp;display=swap"
		rel="stylesheet">
	<link
		href="https://fonts.googleapis.com/css?family=EB+Garamond:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic&amp;display=swap"
		rel="stylesheet">
</head>
<style>
	.swal-custom {
		background: linear-gradient(94deg, rgba(255, 255, 255, 0) 0%, rgba(0, 0, 0, 0.8240546218487395) 26%, rgba(0, 0, 0, 1) 53%, rgba(0, 0, 0, 0.8492647058823529) 79%, rgba(227, 227, 227, 0) 100%);
		color: #ffffff;
		width: 100%;
	}

	.swal-custom-ok-btn {
		color: black !important;
	}
</style>

<body class="shop">
	<div id="page" class="hfeed page-wrapper">
		<header id="site-header" class="site-header header-v2">
			<div class="header-mobile">
				<div class="section-padding">
					<div class="section-container large">
						<div class="row">
							<div class="col-xl-4 col-lg-4 col-md-4 col-sm-3 col-3 header-left">
								<div class="navbar-header">
									<button type="button" id="show-megamenu" class="navbar-toggle"></button>
								</div>
							</div>
							<div class="col-xl-4 col-lg-4 col-md-4 col-sm-6 col-6 header-center">
								<div class="site-logo">
									<a href="/">
										<img width="400" height="79" src="media/logo.png"
											alt="Ruper  Furniture HTML Theme" />
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>

				<div class="header-mobile-fixed">
					<!-- Shop -->
					<div class="shop-page">
						<a href="/"><i class="wpb-icon-shop"></i></a>
					</div>

					<!-- Login -->
					<div class="my-account">
						<div class="login-header">
							<a href="/userProfile"><i class="wpb-icon-user"></i></a>
						</div>
					</div>

					<!-- Search -->
					<div class="search-box">
						<div class="search-toggle"><i class="wpb-icon-magnifying-glass"></i></div>
					</div>

					<!-- Wishlist -->
					<div class="wishlist-box">
						<a href="/wishlist"><i class="wpb-icon-heart"></i></a>
					</div>
				</div>
			</div>

			<div class="header-desktop"
				style="background: linear-gradient(94deg, rgba(226,226,226,1) 0%, rgba(255,255,255,1) 53%, rgba(227,227,227,1) 100%);">
				<div class="header-wrapper">
					<div class="section-padding">
						<div class="section-container large p-l-r">
							<div class="row">
								<div class="col-xl-5 col-lg-5 col-md-12 col-sm-12 col-12 header-left">
									<div class="site-navigation">
										<nav id="main-navigation">
											<ul id="menu-main-menu" class="menu">
												<li class="level-0 menu-item">
													<a href="/"><span class="menu-item-text">home</span></a>
												</li>
												<li class="level-0 menu-item">
													<a href="/allproduct"><span class="menu-item-text">All</span></a>
												</li>
												<li class="level-0 menu-item">
													<a href="/about"><span class="menu-item-text">about us
														</span></a>
												</li>
												<li class="level-0 menu-item">
													<a href="/contact"><span
														class="menu-item-text">Contact</span></a>
												</li>

											</ul>
										</nav>
									</div>
								</div>

								<div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-12 text-center header-center">
									<div class="site-logo">
										<a href="index2.html">
											<img width="400" height="79" src="media/logo.png"
												alt="Ruper â€“ Furniture HTML Theme" />
										</a>
									</div>
								</div>

								<div class="col-xl-5 col-lg-5 col-md-12 col-sm-12 col-12 header-right">
									<div class="header-page-link">

										<!-- Search -->
										<div class="search-box" style="margin-right: -8px;">
											<div class="search-toggle"><i class="icon-search"></i></div>
										</div>

										<!-- Wishlist -->
										<div class="wishlist-box">
											<a href="/wishlist"><i class="icon-heart"></i></a>
											<% if (wishCount != undefined) { %>
												<span class="count-wishlist"><%= wishCount %></span>
											<% } else { %>
												<span class="count-wishlist">0</span>
											<% } %>
											 
										</div>
										
										
										<!-- Cart -->
										<div class="mini-cart top-cart wishlist-box">
											<a class="cart-icon" href="/cart">
												<% if (CartCount != undefined) { %>
													<div class="icons-cart"><i class="icon-large-paper-bag"></i><span class="cart-count"><%= CartCount %></span></div>
												<% } else { %>
													<div class="icons-cart"><i class="icon-large-paper-bag"></i><span class="cart-count">0</span></div>
												<% } %>
												
											</a>
										</div>
										<!-- profile -->
									<div class="wishlist-box" style="margin-left: -0px;">
										<a href="/userprofilepage"><i class="wpb-icon-user"></i></a>
									</div>

									</div>

									
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</header>

		<div id="site-main" class="site-main">
			<div id="main-content" class="main-content">
				<div id="primary" class="content-area">
					<div id="content" class="site-content" role="main">
						<div class="section-padding" style="margin-top: 100px;">
							<div class="section-container p-l-r">
								<% if (!userData) { %>
									<div class="justify-content-center d-flex align-center"
										style="margin-bottom: 20px;">
										<div class="col-lg-8" style="width: 100%; height: 100px; background-color:
															rgb(255, 255, 255); display: flex; justify-content: center;
															align-items: center; border: 1px solid black;">
											<p style="color: black; margin-top: 10px;">Please login</p>
										</div>
									</div>
									<div class="justify-content-center d-flex align-center"
										style="margin-bottom: 100px;">
										<a href="/userLogin"><button class="btn text-light"
												style="background-color: black; width: 200px; height: 40px; padding: 5px;">Go
												to login page</button></a>
									</div>


									<% } else { %>
										<% if (userData.cart.length===0) { %>
											<div class="justify-content-center d-flex align-center"
												style="margin-bottom: 20px;">
												<div class="col-lg-8" style="width: 100%; height: 100px; background-color:
																	rgb(255, 255, 255); display: flex; justify-content: center;
																	align-items: center; border: 1px solid black;">
													<p style="color: black; margin-top: 10px;">Your cart is empty. No
														items found</p>
												</div>
											</div>
											<div class="justify-content-center d-flex align-center"
												style="margin-bottom: 100px;">
												<a href="/allproduct"><button class="btn text-light"
														style="background-color: black; width: 200px; height: 40px; padding: 5px;">Go
														to product page</button></a>
											</div>

											<% } else { %>
												<div class="shop-cart">
													<div class="row">
														<div class="col-xl-8 col-lg-12 col-md-12 col-12">
															<div class="table-responsive">
																<table class="cart-items table" cellspacing="0">
																	<thead>
																		<tr>
																			<th class="product-thumbnail">Product
																			</th>
																			<th class="product-price text-center">
																				Price</th>
																			<th class="product-quantity text-center">
																				Quantity</th>
																			<th class="product-subtotal text-center">
																				Subtotal</th>
																			<th class="product-subtotal text-center">
																				Remove</th>
																		</tr>
																	</thead>
																	<tbody>
																		<% for( let i=0; i < userCartproducts.length;
																			i++ ) { %>
																			<tr class="cart-item align-right">
																				<td
																					class="product-thumbnail text-center">
																					<a
																						href="/productDetailspage?id=<%= userCartproducts[i]._id %>"><img
																							width="600" height="600"
																							src="/uploads/<%= userCartproducts[i].images[0] %>"
																							class="product-image"
																							alt=""></a>
																					<div class="product-name">
																						<% if (userCartproducts[i].stock === 0) { %>
																							<a href="/productDetailspage?id=<%= userCartproducts[i]._id %>">
																								<%= userCartproducts[i].name %>
																							</a>
																							<p class="text-danger align-start">Out of stock</p>
																						<% } else if (userCartproducts[i].stock < userData.cart[i].qty) { %>
																							<a href="/productDetailspage?id=<%= userCartproducts[i]._id %>">
																								<%= userCartproducts[i].name %>
																							</a>
																							<p id="stockwarning<%= i %>" class="text-warning align-start">
																								Only <%= userCartproducts[i].stock %> stock is available
																							</p>
																						<% } else if (userCartproducts[i].isBlocked === true) { %>
																							<a href="/productDetailspage?id=<%= userCartproducts[i]._id %>" class="text-start">
																								<%= userCartproducts[i].name %>
																							</a>
																							<p class="text-danger align-start">Product has been temporaily discontinued</p>
																						<% } else { %>
																							<a href="/productDetailspage?id=<%= userCartproducts[i]._id %>">
																								<%= userCartproducts[i].name %>
																							</a>
																						<% } %>

																					</div>
																				</td>
																				<td class="product-price text-center">
																					<% if
																						(userCartproducts[i].stock===0)
																						{ %>
																						<span class="price">- - -
																							-</span>
																						<span class="price"
																							style="display: none;">â‚¹<%=
																								userCartproducts[i].offerPrice
																								%></span>
																						<% } else { %>
																							<span class="price">â‚¹<%=
																									userCartproducts[i].offerPrice
																									%>.00</span>
																							<% } %>

																				</td>

																				<td class="product-quantity">
																					<div
																						class="center d-flex justify-content-center align-items-center">
																						<% if
																							(userCartproducts[i].stock===0)
																							{ %>
																							<span class="price">- - -
																								-</span>
																							<button
																								style="background-color: black; color: white; display: none;"
																								id="minusbtn"
																								onclick="decrement('<%= userCartproducts[i]._id %>', '<%= i %>', '<%= userCartproducts[i].offerPrice %>')">-</button>
																							<input type="text" readonly
																								class="text-center"
																								style="font-size: 15px; color: rgb(52, 52, 52); margin-bottom: -2px; width: 50px; display: none;"
																								id="qtynumber<%= i %>"
																								value="<%= userData.cart[i].qty %>">
																							<button
																								style="background-color: black; color: white; display: none;"
																								id="plusbtn"
																								onclick="increment('<%= userCartproducts[i]._id %>', '<%= i %>', '<%= userCartproducts[i].offerPrice %>')">+</button>
																							<% } else { %>
																								<button
																									style="background-color: black; color: white;"
																									id="minusbtn"
																									onclick="decrement('<%= userCartproducts[i]._id %>', '<%= i %>', '<%= userCartproducts[i].offerPrice %>' , '<%= userCartproducts[i].stock %>')">-</button>
																								<input type="text"
																									readonly
																									class="text-center"
																									style="font-size: 15px; color: rgb(52, 52, 52); margin-bottom: -2px; width: 50px;"
																									id="qtynumber<%= i %>"
																									value="<%= userData.cart[i].qty %>">
																								<button
																									style="background-color: black; color: white;"
																									id="plusbtn"
																									onclick="increment('<%= userCartproducts[i]._id %>', '<%= i %>', '<%= userCartproducts[i].offerPrice %>')">+</button>
																								<% } %>
																					</div>
																				</td>

																				<td class="product-price text-center">
																					<% if
																						(userCartproducts[i].stock===0)
																						{ %>
																						<span class="price">- - -
																							-</span>
																						<% } else { %>
																							<p class="price text-dark"
																								id="subtotal<%= i %>">â‚¹<%= userCartproducts[i].offerPrice
																									*
																									userData.cart[i].qty
																									%>.00
																							</p>
																							<% } %>

																				</td>
																				<td style="margin: auto;"
																					class="text-center">
																					<button
																						onclick="deleteItem('<%= userCartproducts[i]._id %>' , '<%= i %>' , '<%= userCartproducts[i].offerPrice %>')"
																						style="background: none; border: none;">
																						<svg xmlns="http://www.w3.org/2000/svg"
																							width="16" height="16"
																							fill="currentColor"
																							class="bi bi-trash"
																							viewBox="0 0 16 16">
																							<path
																								d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z" />
																							<path
																								d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z" />
																						</svg>
																					</button>

																				</td>
																			</tr>

																			<% } %>
																	</tbody>
																</table>

															</div>
														</div>

														<div class="col-xl-4 col-lg-12 col-md-12 col-12">

															<div class="cart-totals"
																style="background-color: rgb(255, 255, 255);">
																<h2 class="text-center text-dark"
																	style="padding: 12px;">Total <%=
																		userData.cart.length %> products in your cart
																</h2>
															</div>


															<div class="cart-totals">
																<h2>Cart totals</h2>
																<div>
																	<div class="shipping-totals">
																		<div class="title">Shipping</div>
																		<div class="text-dark">Free shipping</div>
																	</div>

																	<div class="order-total">
																		<div class="title">Total</div>
																		<p style="font-size: 18px; font-weight: 500; color: black;"
																			id="totalprice">â‚¹<%= userData.total %>.00
																		</p>
																	</div>
																</div>
																<div class="proceed-to-checkout">
																	<a onclick="checkingCheckout()"
																		class="checkout-button button">Proceed to
																		checkout</a>
																</div>
															</div>
														</div>
													</div>
												</div>

												<% } %>
													<% } %>
							</div>
						</div>
					</div><!-- #content -->
				</div><!-- #primary -->
			</div><!-- #main-content -->
		</div>

		<footer id="site-footer" class="site-footer background">
			<div class="footer">
				<div class="section-padding">
					<div class="section-container">
						<div class="block-widget-wrap">
							<div class="row">
								<div class="col-lg-3 col-md-6">
									<div class="block block-menu m-b-20">
										<h2 class="block-title">Contact Us</h2>
										<div class="block-content">
											<ul>
												<li>
													<a href="page-contact.html">616.774.0561</a>
												</li>
												<li>
													<a href="page-contact.html">866.453.4748</a>
												</li>
												<li>
													<a href="page-contact.html">HR Fax: 810.222.5439</a>
												</li>
												<li>
													<a href="page-contact.html">sales@ruperfurniture.com</a>
												</li>
											</ul>
										</div>
									</div>

									<div class="block block-social">
										<ul class="social-link">
											<li><a href="#"><i class="fa fa-twitter"></i></a></li>
											<li><a href="#"><i class="fa fa-instagram"></i></a></li>
											<li><a href="#"><i class="fa fa-dribbble"></i></a></li>
											<li><a href="#"><i class="fa fa-behance"></i></a></li>
										</ul>
									</div>
								</div>
								<div class="col-lg-3 col-md-6">
									<div class="block block-menu">
										<h2 class="block-title">Showroom</h2>
										<div class="block-content">
											<p>1000 84th Street SW , Byron Center, MI 49315</p>
											<p>AmericasMart Bldg. #1</p>
											<p>Suite 5C-1, Atlanta, GA 30303</p>
										</div>
									</div>
								</div>
								<div class="col-lg-3 col-md-6">
									<div class="block block-menu">
										<h2 class="block-title">Services</h2>
										<div class="block-content">
											<ul>
												<li>
													<a href="page-about.html">Sale</a>
												</li>
												<li>
													<a href="page-about.html">Quick Ship</a>
												</li>
												<li>
													<a href="page-about.html">New Designs</a>
												</li>
												<li>
													<a href="page-about.html">Accidental Fabric Protection</a>
												</li>
												<li>
													<a href="page-about.html">Furniture Care</a>
												</li>
												<li>
													<a href="page-about.html">Gift Cards</a>
												</li>
											</ul>
										</div>
									</div>
								</div>
								<div class="col-lg-3 col-md-6">
									<div class="block block-newsletter">
										<h2 class="block-title">Newsletter</h2>
										<div class="block-content">
											<div class="newsletter-text">Enter your email below to be the first to know
												about new collections and product launches.</div>
											<form action="#" method="post" class="newsletter-form">
												<input type="email" class="bg-white" name="your-email" value=""
													size="40" placeholder="Email address">
												<span class="btn-submit">
													<input type="submit" value="Subscribe">
												</span>
											</form>
										</div>
									</div>
									<div class="block block-image">
										<img width="309" height="32" src="media/payments.png" alt="">
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="footer-bottom">
				<div class="section-padding">
					<div class="section-container">
						<div class="block-widget-wrap">
							<p class="copyright text-center">Copyright Â© 2022. All Right Reserved</p>
						</div>
					</div>
				</div>
			</div>
		</footer>
	</div>

	<!-- Back Top button -->
	<div class="back-top button-show">
		<i class="arrow_carrot-up"></i>
	</div>

	<!-- Search -->
    <div class="search-overlay">
		<div class="wrapper-search">
            <div class="search-from">
				<div class="search-box">
                    <div class="d-flex">
                        <button id="searchsubmit" class="btn" onclick="search()">
                            <i class="icon-search"></i>
                        </button>
                        <input id="myInput" type="text" autocomplete="off" value="" name="s" class="input-search s"
                            placeholder="Search...">
                        <div class="close-search" onclick="cancelsearch()">Cancel</div>
                    </div>
                    <h4 id="noproduct" style="display: none;">No products founded</h4>
                    <div id="prodatas">
                        
                    </div>
				</div>
            </div>
		</div>
	</div>

	<!-- Page Loader 
	<div class="page-preloader">
		<div class="loader">
			<div></div>
			<div></div>
		</div>
	</div>   -->

	<!-- Dependency Scripts -->
	<script src="libs/popper/js/popper.min.js"></script>
	<script src="libs/jquery/js/jquery.min.js"></script>
	<script src="libs/bootstrap/js/bootstrap.min.js"></script>
	<script src="libs/slick/js/slick.min.js"></script>
	<script src="libs/countdown/js/jquery.countdown.min.js"></script>
	<script src="libs/mmenu/js/jquery.mmenu.all.min.js"></script>
	<script src="libs/slider/js/tmpl.js"></script>
	<script src="libs/slider/js/jquery.dependClass-0.1.js"></script>
	<script src="libs/slider/js/draggable-0.1.js"></script>
	<script src="libs/slider/js/jquery.slider.js"></script>
	<script src="libs/elevatezoom/js/jquery.elevatezoom.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
		integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
		crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

	<!-- Site Scripts -->
	<script src="assets/js/app.js"></script>
</body>

<script>

	function increment(id, index, productPrice) {
		const price = parseInt(productPrice);
		const qtynumberString = document.getElementById("qtynumber" + index)
		const qtynumber = parseInt(qtynumberString.value) + 1;

		$.ajax({
			url: "/cartPlus",
			method: "post",
			data: {
				id,
				index,
				price,
				qtynumber
			},
			success: (response) => {
				if (response.status === "limitReached") {
					Swal.fire({
						icon: "error",
						iconColor: "#ff0000",
						title: "Quantity reaches limit",
						showConfirmButton: false,
						customClass: {
							popup: 'swal-custom',
						},
						timer: 1500
					});
				} else if (response.status === "notlogin") {
					Swal.fire({
						title: "Please login",
						showCancelButton: true,
						confirmButtonColor: "#39e75f",
						cancelButtonColor: "#ffffff",
						confirmButtonText: "Go to login page",
						customClass: {
							popup: 'swal-custom',
							cancelButton: 'swal-custom-ok-btn'
						}
					}).then((result) => {
						if (result.isConfirmed) {
							window.location.href = "/userLogin"
						}
					});
				} else if (response.status === "blocked") {
					Swal.fire({
						title: "Oops ! . . .",
						text: "Product has been temporaily discontinued",
						showCancelButton: true,
						confirmButtonColor: "#39e75f",
						cancelButtonColor: "#ffffff",
						confirmButtonText: "Okay",
						customClass: {
							popup: 'swal-custom',
							cancelButton: 'swal-custom-ok-btn'
						}
					}).then((result) => {
						if (result.isConfirmed) {
							window.location.reload()
						}
					});
				} else if (response.status === "stocknotavailable") {
					Swal.fire({
						icon: "error",
						iconColor: "#ff0000",
						title: "That much stock not avaibale",
						showConfirmButton: false,
						customClass: {
							popup: 'swal-custom',
						},
						timer: 1500
					});
				} else if (response.status === "okay") {
					const tempSubtotal = document.getElementById("subtotal" + index);
					tempSubtotal.innerHTML = "â‚¹" + price * qtynumber+".00";
					qtynumberString.value = qtynumber;

					// total side
					const DBtotal = response.total;
					document.getElementById("totalprice").textContent = "â‚¹" + DBtotal + ".00";
				}
			}
		})
	}


	function decrement(id, index, productPrice, userCartproducts, userData) {
		const price = parseInt(productPrice);
		const qtynumberString = document.getElementById("qtynumber" + index)
		const qtynumber = parseInt(qtynumberString.value) - 1;
		$.ajax({
			url: "/cartMinus",
			method: "post",
			data: {
				id,
				index,
				price,
				qtynumber
			},
			success: (response) => {
				if (response.status === "minimum1") {
					Swal.fire({
						icon: "error",
						iconColor: "#ff0000",
						title: "Quantity need atleast one",
						showConfirmButton: false,
						customClass: {
							popup: 'swal-custom',
						},
						timer: 1500
					});
				}else if (response.status === "notlogin") {
					Swal.fire({
						title: "Please login",
						showCancelButton: true,
						confirmButtonColor: "#39e75f",
						cancelButtonColor: "#ffffff",
						confirmButtonText: "Go to login page",
						customClass: {
							popup: 'swal-custom',
							cancelButton: 'swal-custom-ok-btn'
						}
					}).then((result) => {
						if (result.isConfirmed) {
							window.location.href = "/userLogin"
						}
					});
				} else if (response.status === "blocked") {
					Swal.fire({
						title: "Oops ! . . .",
						text: "Product has been temporaily discontinued",
						showCancelButton: true,
						confirmButtonColor: "#39e75f",
						cancelButtonColor: "#ffffff",
						confirmButtonText: "Okay",
						customClass: {
							popup: 'swal-custom',
							cancelButton: 'swal-custom-ok-btn'
						}
					}).then((result) => {
						if (result.isConfirmed) {
							window.location.reload()
						}
					});
				} else if (response.status === "okay") {
					const tempSubtotal = document.getElementById("subtotal" + index);
					tempSubtotal.innerHTML = "â‚¹" + price * qtynumber+".00";
					qtynumberString.value = qtynumber;
					// total
					const DBtotal = response.total;
					document.getElementById("totalprice").textContent = "â‚¹" + DBtotal + ".00";
					// new
					if (qtynumber <= userCartproducts) {
						document.getElementById("stockwarning" + index).style.display = "none"
					}
				}
			}
		})
	}

	function deleteItem(id, index, price) {
		const qtynumber = document.getElementById("qtynumber" + index).value
		Swal.fire({
			title: "Are you sure?",
			text: "You want to Remove this product from your cart?",
			showCancelButton: true,
			confirmButtonColor: "#FF0000",
			cancelButtonColor: "#ffffff",
			confirmButtonText: "Remove",
			customClass: {
				popup: 'swal-custom',
				cancelButton: 'swal-custom-ok-btn'
			}
		}).then((result) => {
			if (result.isConfirmed) {
				$.ajax({
					url: "/cart",
					method: "delete",
					data: {
						id,
						index,
						qtynumber,
						price
					},
					success: (response) => {
						if (response.status === "okay") {
							window.location.reload()
						} else if (response.status === "wrong") {
							Swal.fire({
								icon: "error",
								title: "Oops!.. Network is busy please refresh",
								showConfirmButton: false,
								customClass: {
									popup: 'swal-custom',
								},
								timer: 1500
							});
						}
					}
				})
			}
		});
	}

	function checkingCheckout() {
		$.ajax({
			url: "/checkingCheckout",
			method: "get",
			success: (response) => {
				if (response.status === "okay") {
					window.location.href = "/checkout"
				} else if (response.status === "missingqty") {
					Swal.fire({
						icon: "error",
						iconColor : "red",
						text: "This amount of stock is currently not available ! . . . Please refresh and check again.",
						customClass: {
							popup: 'swal-custom',
						},
						confirmButtonColor : "#03c04a"
					});
				}  else if (response.status === "blocked") {
					Swal.fire({
						title: "Oops ! . . .",
						text: "Product has been temporaily discontinued",
						showCancelButton: true,
						confirmButtonColor: "#39e75f",
						cancelButtonColor: "#ffffff",
						confirmButtonText: "Okay",
						customClass: {
							popup: 'swal-custom',
							cancelButton: 'swal-custom-ok-btn'
						}
					}).then((result) => {
						if (result.isConfirmed) {
							window.location.reload()
						}
					});
				}
			}
		})
	}


	const searchValue = document.getElementById("myInput")
    let clearTimer;
    searchValue.addEventListener("keyup", () => {
        document.getElementById("prodatas").innerHTML= "";
        document.getElementById("noproduct").style.display = "none"
        clearTimeout(clearTimer);
        clearTimer = setTimeout(() => {
            search();
        }, 1000)
    });
    function search(){
        const searchValue = document.getElementById("myInput").value
        $.ajax({
			url: "/search",
			method: "post",
			data: {
				searchValue
			},
			success: (response) => {
				if (response.status === "okay") {
					document.getElementById("prodatas").innerHTML= ""
                    displaySearch(response.products)
				} else {
					document.getElementById("noproduct").style.display = "block"
				}
			}
		})
    }

    function displaySearch(data) {
    const prodatasDiv = document.getElementById("prodatas");
    prodatasDiv.innerHTML = ""; // Clear previous search results
    
    data.forEach(product => {
        const productDiv = document.createElement("div");
        productDiv.classList.add("d-flex", "align-items-center");

        const imageDiv = document.createElement("div");
        imageDiv.style.width = "80px";
        imageDiv.style.height = "80px";
        imageDiv.style.backgroundColor = "rgb(255, 255, 255)";
        imageDiv.style.marginRight = "30px";
        imageDiv.innerHTML = `<img src="/uploads/${product.images[0]}" alt="product image">`;
        imageDiv.onclick = function() {
            window.location.href = `/productDetailspage?id=${product._id}`;
        };

        const infoDiv = document.createElement("div");
        infoDiv.style.display = "flex";
        infoDiv.style.flexDirection = "column";
        infoDiv.style.justifyContent = "center";
        infoDiv.innerHTML = `
            <h5 style="margin: 0;">${product.name}</h5>
            <p style="margin: 0;">â‚¹${product.regularPrice}.00</p>
        `;

        productDiv.appendChild(imageDiv);
        productDiv.appendChild(infoDiv);
        prodatasDiv.appendChild(productDiv);

        const hr = document.createElement("hr");
        prodatasDiv.appendChild(hr);
    });
}


function cancelsearch(){
    document.getElementById("noproduct").style.display = "none"
    const prodatasDiv = document.getElementById("prodatas").innerHTML = "";
    const searchValue = document.getElementById("myInput").value =""
}
</script>

</html>