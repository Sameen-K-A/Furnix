<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from caketheme.com/html/ruper/shop-checkout.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 26 Jan 2024 08:52:33 GMT -->

<head>
	<!-- Meta Data -->
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>FURNIX</title>

	<!-- Favicon -->
	<link rel="icon" type="image/png" sizes="32x32" href="media/favicon-16x16.png">

	<!-- Dependency Styles -->
	<link rel="stylesheet" href="libs/bootstrap/css/bootstrap.min.css" type="text/css">
	<link rel="stylesheet" href="libs/feather-font/css/iconfont.css" type="text/css">
	<link rel="stylesheet" href="libs/icomoon-font/css/icomoon.css" type="text/css">
	<link rel="stylesheet" href="libs/font-awesome/css/font-awesome.css" type="text/css">
	<link rel="stylesheet" href="libs/wpbingofont/css/wpbingofont.css" type="text/css">
	<link rel="stylesheet" href="libs/elegant-icons/css/elegant.css" type="text/css">
	<link rel="stylesheet" href="libs/slick/css/slick.css" type="text/css">
	<link rel="stylesheet" href="libs/slick/css/slick-theme.css" type="text/css">
	<link rel="stylesheet" href="libs/mmenu/css/mmenu.min.css" type="text/css">
	<link rel="stylesheet" href="libs/slider/css/jslider.css">
	<link rel="stylesheet" href="libs/select2/css/select2.min.css">

	<!-- Site Stylesheet -->
	<link rel="stylesheet" href="assets/css/app.css" type="text/css">
	<link rel="stylesheet" href="assets/css/responsive.css" type="text/css">

	<!-- Google Web Fonts -->
	<link
		href="https://fonts.googleapis.com/css2?family=Barlow+Semi+Condensed:wght@100;200;300;400;500;600;700&amp;display=swap"
		rel="stylesheet">
	<link
		href="https://fonts.googleapis.com/css?family=EB+Garamond:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic&amp;display=swap"
		rel="stylesheet">
</head>

<style>
	.editDeletebtn {
		background-color: white;
		text-align: center;
		border: 1px solid black;
		border-radius: 50px;
		width: 70px;
		font-size: small;
	}
	.applycoupon {
		background-color: rgb(0, 0, 0);
		text-align: center;
		width: 200px;
		height: 43px;
		color: white;
	}

	.swal-custom {
		background: linear-gradient(94deg, rgba(255, 255, 255, 0) 0%, rgba(0, 0, 0, 0.8240546218487395) 26%, rgba(0, 0, 0, 1) 53%, rgba(0, 0, 0, 0.8492647058823529) 79%, rgba(227, 227, 227, 0) 100%);
		color: #ffffff;
		width: 100%;
	}

	.swal-custom-ok-btn {
		color: black !important;
	}
</style>

<body class="shop">
	<div id="page" class="hfeed page-wrapper">
		<header id="site-header" class="site-header header-v2">
			<div class="header-mobile">
				<div class="section-padding">
					<div class="section-container large">
						<div class="row">
							<div class="col-xl-4 col-lg-4 col-md-4 col-sm-3 col-3 header-left">
								<div class="navbar-header">
									<button type="button" id="show-megamenu" class="navbar-toggle"></button>
								</div>
							</div>
							<div class="col-xl-4 col-lg-4 col-md-4 col-sm-6 col-6 header-center">
								<div class="site-logo">
									<a href="/">
										<img width="400" height="79" src="media/logo.png"
											alt="Ruper  Furniture HTML Theme" />
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>

				<div class="header-mobile-fixed">
					<!-- Shop -->
					<div class="shop-page">
						<a href="/"><i class="wpb-icon-shop"></i></a>
					</div>

					<!-- Login -->
					<div class="my-account">
						<div class="login-header">
							<a href="/userProfile"><i class="wpb-icon-user"></i></a>
						</div>
					</div>

					<!-- Search -->
					<div class="search-box">
						<div class="search-toggle"><i class="wpb-icon-magnifying-glass"></i></div>
					</div>

					<!-- Wishlist -->
					<div class="wishlist-box">
						<a href="/wishlist"><i class="wpb-icon-heart"></i></a>
					</div>
				</div>
			</div>

			<div class="header-desktop"
				style="background: linear-gradient(94deg, rgba(226,226,226,1) 0%, rgba(255,255,255,1) 53%, rgba(227,227,227,1) 100%); z-index: 1 !important;">
				<div class="header-wrapper">
					<div class="section-padding">
						<div class="section-container large p-l-r">
							<div class="row">
								<div class="col-xl-5 col-lg-5 col-md-12 col-sm-12 col-12 header-left">
									<div class="site-navigation">
										<nav id="main-navigation">
											<ul id="menu-main-menu" class="menu">
												<li class="level-0 menu-item">
													<a href="/"><span class="menu-item-text">home</span></a>
												</li>
												<li class="level-0 menu-item">
													<a href="/allproduct"><span class="menu-item-text">All</span></a>
												</li>
												<li class="level-0 menu-item">
													<a href="page-contact.html"><span class="menu-item-text">about us
														</span></a>
												</li>
												<li class="level-0 menu-item">
													<a href="page-contact.html"><span
															class="menu-item-text">Contact</span></a>
												</li>

											</ul>
										</nav>
									</div>
								</div>

								<div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-12 text-center header-center">
									<div class="site-logo">
										<a href="index2.html">
											<img width="400" height="79" src="media/logo.png"
												alt="Ruper – Furniture HTML Theme" />
										</a>
									</div>
								</div>

								<div class="col-xl-5 col-lg-5 col-md-12 col-sm-12 col-12 header-right">
									<div class="header-page-link">

										<!-- Search -->
										<div class="search-box" style="margin-right: -8px;">
											<div class="search-toggle"><i class="icon-search"></i></div>
										</div>

										<!-- Wishlist -->
										<div class="wishlist-box">
											<a href="/wishlist"><i class="icon-heart"></i></a>
											<% if (wishCount != undefined) { %>
												<span class="count-wishlist"><%= wishCount %></span>
											<% } else { %>
												<span class="count-wishlist">0</span>
											<% } %>
											 
										</div>
										
										
										<!-- Cart -->
										<div class="mini-cart top-cart wishlist-box">
											<a class="cart-icon" href="/cart">
												<% if (CartCount != undefined) { %>
													<div class="icons-cart"><i class="icon-large-paper-bag"></i><span class="cart-count"><%= CartCount %></span></div>
												<% } else { %>
													<div class="icons-cart"><i class="icon-large-paper-bag"></i><span class="cart-count">0</span></div>
												<% } %>
												
											</a>
										</div>
										<!-- profile -->
									<div class="wishlist-box" style="margin-left: -0px;">
										<a href="/userprofilepage"><i class="wpb-icon-user"></i></a>
									</div>

									</div>

									
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</header>

		<div id="site-main" class="site-main">
			<div id="main-content" class="main-content">
				<div id="primary" class="content-area">
					<div id="content" class="site-content" role="main" style="margin-top: 100px;">
						<div class="section-padding">
							<div class="section-container p-l-r">
								<div class="shop-checkout">
									<div class="row">
										<div class="col-xl-6 col-lg-6 col-md-12 col-12">
											<div class="checkout-review-order">
												<div class="checkout-review-order-table">
													<div class="review-order-title">Product</div>
													<div class="cart-items">
														<% for( let i=0; i < userData.cart.length; i++ ) { %>
															<div class="cart-item">
																<div class="info-product">
																	<div class="product-thumbnail">
																		<img width="600" height="600"
																			src="/uploads/<%= ProductResultarray[i].images[0] %>"
																			alt="image is not available">
																	</div>
																	<div class="product-name">
																		<%= ProductResultarray[i].name %>
																			<strong class="product-quantity">QTY : <%=
																					userData.cart[i].qty %></strong>
																	</div>
																</div>
																<div class="product-total">
																	<span>₹<%= ProductResultarray[i].offerPrice %>.00</span>
																</div>
															</div>
															<% } %>
													</div>
													<div class="cart-subtotal">
														<h2>Subtotal</h2>
														<div class="subtotal-price">
															<span id="subtotalProduct">₹<%= userData.total %>.00</span>
														</div>
													</div>
													<div class="order-total">
														<h2>Shipping charge</h2>
														<div class="subtotal-price">
															<span >₹100.00</span>
														</div>
													</div>
													<div id="shippingDiv" class="shipping-totals shipping">
														<input type="text" id="cpncode" style="width: 80%;" onclick="clearbox()" placeholder="Apply coupon">
														<button class="applycoupon" id="applyCoupon" onclick="cpnApply()">Apply</button><br>
													</div>
													<p style="margin-top: -20px; text-align: center; color: red;" id="cpnerror"></p>
													

													<div class="order-total">
														<h2>Coupon discount amount</h2>
														<div class="subtotal-price">
															<span id="cpndiscountamount">₹0.00</span>
														</div>
													</div>

													<div class="order-total">
														<h2>Total</h2>
														<div class="total-price">
															<strong>
																<span style="font-weight: bolder;" id="totalAmount">₹<%= userData.total + 100 %>.00</span>
															</strong>
														</div>
													</div>
												</div>
											</div>
										</div>
										<div class="col-xl-6 col-lg-6 col-md-12 col-12">
											<div class="checkout-review-order">
												<div id="elseID">
													<% if (userData.address.length===0) { %>
														<div
															style="width: 100%; height: 150px; background-color:rgb(255, 255, 255); display: flex; flex-direction: column; justify-content: center; align-items: center; border: 1px solid black;">
															<p style="color: black; margin-bottom: 10px;">Address not
																found! Please insert</p>
															<a href="/address"
																style="text-decoration: none; display: flex; justify-content: center; align-items: center; width: 40%;">
																<button class="addaddress"
																	style="width: 100%; color: white; background-color: black; height: 40px;">Go
																	to address page</button>
															</a>
														</div>

														<% } else { %>
															<div
																style="display: flex; justify-content: center; align-items: center; width: 100%; height: 40px; background-color: rgb(0, 0, 0); margin-bottom: 20px; padding-top: 15px;">
																<p style="color: rgb(255, 255, 255); font-size: 15px;">
																	Select your
																	address</p>
															</div>

															<% for( let i=0; i < userData.address.length; i++ ) { %>
																<div
																	style="background-color: rgb(228, 228, 228); width: 100%; height: 40px; border: 1px solid rgb(228, 228, 228); color: black; padding: 10px; display: flex; justify-content: space-between; align-items: center;">
																	<input type="radio" id="addressCheckbox<%= i %>"
																		name="addressCheckbox"
																		value="<%= userData.address[i]._id %>">
																	<h5 class="text-align-center">
																		<%= userData.address[i].addressType %>
																	</h5>
																	<div>
																		<a
																			href="/addressedit?id=<%= userData.address[i]._id %>"><button
																				class="editDeletebtn">Edit</button></a>
																	</div>
																</div>
																<div
																	style="background-color: rgb(255, 255, 255); width: 100%; height: auto; padding: 10px; border: 1px solid rgb(228, 228, 228); color: black;">
																	<p>
																		<%= userData.address[i].name %><br>
																			<%= userData.address[i].number %><br>
																				<%= userData.address[i].address %>,
																					<%=userData.address[i].landmark %>,
																						<%=
																							userData.address[i].district%>
																							,
																							<%=userData.address[i].state%>
																								,
																								<%=userData.address[i].pin%>
																									<br>
																									<%= userData.address[i].alternateNumber
																										%><br>
																	</p>
																</div>
																<br>
																<% } %>
																	<% } %>
												</div>
												<% if (userData.address.length <3) { %>
												 
												
												<!-- Button trigger modal -->
												<button type="button" class="btn" style="width: 100%; background-color: black; color: white;" data-toggle="modal" data-target="#addressModal">
													Add address
												</button>

												<!-- Modal -->
												<div class="modal fade" id="addressModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
												aria-hidden="true" style="z-index: 1050;">
												<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
													<div class="modal-content">
														<div class="modal-body" style="padding: 50px;">
																<!-- Your modal body content goes here -->
																<div class="form-row row hidden" id="addressForm" style="margin-top: 30px;">
																	<div class="col-lg-6">
																		<label for="name">Name</label>
																		<input type="text" name="name" id="name" style="width: 100%;" onclick="nameClear()">
																		<b><p style="color:  red;" class="text-center" id="nameError"></p></b></p>
																	</div>
																	<div class="col-lg-6 ">
																		<label for="phone">Phone number</label>
																		<input type="text" style="width: 100%;" id="number" name="phone" onclick="phoneClear()">
																		<b><p style="color:  red;" class="text-center" id="phoneError"></p></b>
																	</div>
																	<div class="col-lg-12">
																		<label for="Address">Address</label>
																		<textarea name="Address" id="address" class="col-lg-12" onclick="addressClear()"></textarea>
																		<b><p style="color:  red;" class="text-center" id="addressError"></p></b>
																	</div>
																	<div class="col-lg-6">
																		<label for="PIN">PIN code</label>
																		<input type="text" id="pin" style="width: 100%;" name="PIN" onclick="pinClear()">
																		<b><p style="color:  red;" class="text-center" id="pinError"></p></b>
																	</div>
																	<div class="col-lg-6">
																		<label for="District">City / Town / District</label>
																		<input type="text" id="district" style="width: 100%;" name="District" onclick="districtClear()">
																		<b><p style="color:  red;" class="text-center" id="districtError"></p></b>
																	</div>
																	<div class="col-lg-6">
																		<label for="State">State</label>
																		<select id="state" style="width: 100%;" name="State" onchange="stateClear()">
																			<option value="Andhra Pradesh">Andhra Pradesh</option>
																			<option value="Arunachal Pradesh">Arunachal Pradesh</option>
																			<option value="Assam">Assam</option>
																			<option value="Bihar">Bihar</option>
																			<option value="Chhattisgarh">Chhattisgarh</option>
																			<option value="Goa">Goa</option>
																			<option value="Gujarat">Gujarat</option>
																			<option value="Haryana">Haryana</option>
																			<option value="Himachal Pradesh">Himachal Pradesh</option>
																			<option value="Jharkhand">Jharkhand</option>
																			<option value="Karnataka">Karnataka</option>
																			<option value="Kerala">Kerala</option>
																			<option value="Madhya Pradesh">Madhya Pradesh</option>
																			<option value="Maharashtra">Maharashtra</option>
																			<option value="Manipur">Manipur</option>
																			<option value="Meghalaya">Meghalaya</option>
																			<option value="Mizoram">Mizoram</option>
																			<option value="Nagaland">Nagaland</option>
																			<option value="Odisha">Odisha</option>
																			<option value="Punjab">Punjab</option>
																			<option value="Rajasthan">Rajasthan</option>
																			<option value="Sikkim">Sikkim</option>
																			<option value="Tamil Nadu">Tamil Nadu</option>
																			<option value="Telangana">Telangana</option>
																			<option value="Tripura">Tripura</option>
																			<option value="Uttar Pradesh">Uttar Pradesh</option>
																			<option value="Uttarakhand">Uttarakhand</option>
																			<option value="West Bengal">West Bengal</option>
																		</select>
																		<b><p style="color:  red;" class="text-center" id="stateError"></p></b></p>
																	</div>
																	<div class="col-lg-6">
																		<label for="Address-type">Address type</label>
																		<select name="Address-type" id="Address-type" style="width: 100%;">
																			<option value="Home">Home</option>
																			<option value="Work">Work</option>
																		</select>
																	</div>
																	<div class="col-lg-6">
																		<label for="Landmark">Landmark</label>
																		<input type="text" id="Landmark" style="width: 100%;" name="Landmark" onclick="landClear()">
																		<b><p style="color:  red;" class="text-center" id="landError"></p></b>
																	</div>
																	<div class="col-lg-6" style="margin-bottom: 50px;">
																		<label for="District">Alternate Phone</label>
																		<input type="text" id="altNumber" style="width: 100%;" name="District" onclick="altClear()">
																		<b><p style="color:  red;" class="text-center" id="altError"></p></b>
																	</div>
																</div>
															</div>
															<div class="modal-footer justify-content-center" style="margin-top: -20px;">
																<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
																<button type="button" class="btn btn-primary" onclick="addAddress()">Save changes</button>
															</div>
														</div>
													</div>
												</div>
												<% } %>
												<!--modal end-->
											</div>
										</div>
									</div>
									<hr style="margin-top: 50px; margin-bottom: 50px;">
									<div class="checkout-review-order">
										<div id="payment" class="checkout-payment">
											<ul class="payment-methods methods custom-radio">
												<h5><b>Select your payment method</b></h5>
												<br>
												<li class="payment-method">
													<input type="radio" class="input-radio" name="payment_method"
														value="Cash on delivery">
													<label>Cash on delivery</label>
													<div class="payment-box">
														<p>Pay with cash upon delivery. Cash on delivery is only available for payments below 2000.</p>
													</div>
												</li>
												<li class="payment-method">
													<input type="radio" class="input-radio" name="payment_method"
														value="Razorpay">
													<label>Online payment</label>
													<div class="payment-box">
														<p>Online payment is only available for payments below 15000₹. Make your payment directly into Online payment.
															Please use your Order ID as the payment reference.
															Your order will not be shipped until the funds have
															cleared in our account.</p>
													</div>
												</li>
											</ul>
											<div class="form-row place-order">
												<div class="terms-and-conditions-wrapper">
													<div class="privacy-policy-text"></div>
												</div>
												<div style="margin: auto; display: none;" id="selectAddressID">
													<b>
														<p class="text-danger">Please select an address for placing your
															order</p>
													</b>
												</div>
												<div style="margin: auto; display: none;" id="productlength">
													<b>
														<p class="text-danger">Produts not founded</p>
													</b>
												</div>
												<div style="margin: auto; display: none;" id="selectpayment">
													<b>
														<p class="text-danger">Please select a payment method</p>
													</b>
												</div>
												<button type="submit" class="button alt" name="checkout_place_order"
													value="Place order" style="margin-top: 15px;"
													onclick="placeOrder('<%= userData.address.length%>' , '<%= userData.cart.length %>')">Place
													order</button>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div><!-- #content -->
				</div><!-- #primary -->
			</div><!-- #main-content -->
		</div>

		<footer id="site-footer" class="site-footer background">
			<div class="footer">
				<div class="section-padding">
					<div class="section-container">
						<div class="block-widget-wrap">
							<div class="row">
								<div class="col-lg-3 col-md-6">
									<div class="block block-menu m-b-20">
										<h2 class="block-title">Contact Us</h2>
										<div class="block-content">
											<ul>
												<li>
													<a href="page-contact.html">616.774.0561</a>
												</li>
												<li>
													<a href="page-contact.html">866.453.4748</a>
												</li>
												<li>
													<a href="page-contact.html">HR Fax: 810.222.5439</a>
												</li>
												<li>
													<a href="page-contact.html">sales@ruperfurniture.com</a>
												</li>
											</ul>
										</div>
									</div>

									<div class="block block-social">
										<ul class="social-link">
											<li><a href="#"><i class="fa fa-twitter"></i></a></li>
											<li><a href="#"><i class="fa fa-instagram"></i></a></li>
											<li><a href="#"><i class="fa fa-dribbble"></i></a></li>
											<li><a href="#"><i class="fa fa-behance"></i></a></li>
										</ul>
									</div>
								</div>
								<div class="col-lg-3 col-md-6">
									<div class="block block-menu">
										<h2 class="block-title">Showroom</h2>
										<div class="block-content">
											<p>1000 84th Street SW , Byron Center, MI 49315</p>
											<p>AmericasMart Bldg. #1</p>
											<p>Suite 5C-1, Atlanta, GA 30303</p>
										</div>
									</div>
								</div>
								<div class="col-lg-3 col-md-6">
									<div class="block block-menu">
										<h2 class="block-title">Services</h2>
										<div class="block-content">
											<ul>
												<li>
													<a href="page-about.html">Sale</a>
												</li>
												<li>
													<a href="page-about.html">Quick Ship</a>
												</li>
												<li>
													<a href="page-about.html">New Designs</a>
												</li>
												<li>
													<a href="page-about.html">Accidental Fabric Protection</a>
												</li>
												<li>
													<a href="page-about.html">Furniture Care</a>
												</li>
												<li>
													<a href="page-about.html">Gift Cards</a>
												</li>
											</ul>
										</div>
									</div>
								</div>
								<div class="col-lg-3 col-md-6">
									<div class="block block-newsletter">
										<h2 class="block-title">Newsletter</h2>
										<div class="block-content">
											<div class="newsletter-text">Enter your email below to be the first to know
												about new collections and product launches.</div>
											<form action="#" method="post" class="newsletter-form">
												<input type="email" class="bg-white" name="your-email" value=""
													size="40" placeholder="Email address">
												<span class="btn-submit">
													<input type="submit" value="Subscribe">
												</span>
											</form>
										</div>
									</div>
									<div class="block block-image">
										<img width="309" height="32" src="media/payments.png" alt="">
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="footer-bottom">
				<div class="section-padding">
					<div class="section-container">
						<div class="block-widget-wrap">
							<p class="copyright text-center">Copyright © 2022. All Right Reserved</p>
						</div>
					</div>
				</div>
			</div>
		</footer>
	</div>

	<!-- Back Top button -->
	<div class="back-top button-show">
		<i class="arrow_carrot-up"></i>
	</div>

	 <!-- Search -->
	 <div class="search-overlay">
		<div class="wrapper-search">
            <div class="search-from">
				<div class="search-box">
                    <div class="d-flex">
                        <button id="searchsubmit" class="btn" onclick="search()">
                            <i class="icon-search"></i>
                        </button>
                        <input id="myInput" type="text" autocomplete="off" value="" name="s" class="input-search s"
                            placeholder="Search...">
                        <div class="close-search" onclick="cancelsearch()">Cancel</div>
                    </div>
                    <h4 id="noproduct" style="display: none;">No products founded</h4>
                    <div id="prodatas">
                        
                    </div>
				</div>
            </div>
		</div>
	</div>

	<!-- Page Loader -->
	<!-- <div class="page-preloader">
		<div class="loader">
			<div></div>
			<div></div>
		</div>
	</div> -->

	<!-- Dependency Scripts -->
	<script src="libs/popper/js/popper.min.js"></script>
	<script src="libs/jquery/js/jquery.min.js"></script>
	<script src="libs/bootstrap/js/bootstrap.min.js"></script>
	<script src="libs/slick/js/slick.min.js"></script>
	<script src="libs/countdown/js/jquery.countdown.min.js"></script>
	<script src="libs/mmenu/js/jquery.mmenu.all.min.js"></script>
	<script src="libs/slider/js/tmpl.js"></script>
	<script src="libs/slider/js/jquery.dependClass-0.1.js"></script>
	<script src="libs/slider/js/draggable-0.1.js"></script>
	<script src="libs/slider/js/jquery.slider.js"></script>
	<script src="libs/elevatezoom/js/jquery.elevatezoom.js"></script>
	<script src="libs/select2/js/select2.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
		integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
		crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

	<!-- Site Scripts -->
	<script src="assets/js/app.js"></script>
</body>

<script>

	function placeOrder(data, products) {
		let couponUsed;
		if(document.getElementById("applyCoupon").textContent ==="Cancel"){
			couponUsed = document.getElementById("cpncode").value;
		}
		if (products == 0) {
			document.getElementById("productlength").style.display = "block";
			setTimeout(() => {
				document.getElementById("productlength").style.display = "none";
			}, 3000);
		} else {
			if (data == 0) {
				document.getElementById("selectAddressID").style.display = "block";
				setTimeout(() => {
					document.getElementById("selectAddressID").style.display = "none";
				}, 3000);
			} else {
				let addressChecked = false;
				const addressradio = document.getElementsByName("addressCheckbox")
				for (let i = 0; i < addressradio.length; i++) {
					if (addressradio[i].checked) {
						addressChecked = addressradio[i].value;
						break;
					} else {
						addressChecked = false;
					}
				}
				if (addressChecked) {
					let paymentchecked = false
					const paymentradio = document.getElementsByName("payment_method");
					for (let j = 0; j < paymentradio.length; j++) {
						if (paymentradio[j].checked) {
							paymentchecked = paymentradio[j].value;
							break;
						} else {
							paymentchecked = false;
						}
					}
					if (paymentchecked) {
						$.ajax({
							url: "/checkout",
							method: "post",
							data: {
								addressChecked,
								paymentchecked,
								couponUsed
							},
							success: (response) => {
								if (response.status === "true") {
									window.location.href = "/orderSuccessfull"
								} else if (response.status === "stocklimit") {
									Swal.fire({
										icon: "error",
										iconColor: "red",
										text: "This amount of stock is currently not available ! . . . Go to your cart and check again.",
										customClass: {
											popup: 'swal-custom',
										},
										confirmButtonColor: "#03c04a"
									});
								} else if (response.status === "blocked") {
									Swal.fire({
										title: "Oops ! . . .",
										text: "Product has been temporaily discontinued",
										showCancelButton: true,
										confirmButtonColor: "#39e75f",
										cancelButtonColor: "#ffffff",
										confirmButtonText: "Okay",
										customClass: {
											popup: 'swal-custom',
											cancelButton: 'swal-custom-ok-btn'
										}
									}).then((result) => {
										if (result.isConfirmed) {
											window.location.reload()
										}
									});
								}else if (response.status === "cashondeliverylimit") {
									Swal.fire({
										title: "Amount reached",
										text: "Cash on delivery is only available for payments below 2000. Please use another payment method for amounts exceeding this limit.",
										showCancelButton: false,
										confirmButtonColor: "#39e75f",
										confirmButtonText: "Okay",
										customClass: {
											popup: 'swal-custom',
											cancelButton: 'swal-custom-ok-btn'
										}
									});
								}else if (response.status === "network") {
									Swal.fire({
										icon: "error",
										title: "Oops!.. Network is busy please refresh",
										showConfirmButton: false,
										customClass: {
											popup: 'swal-custom',
										},
										timer: 1500
									});
								}
								else if (response.status === "15000limit") {
									Swal.fire({
										title: "Amount reached",
										text: "Online payment is only available for payments below 15000₹.",
										showCancelButton: false,
										confirmButtonColor: "#39e75f",
										confirmButtonText: "Okay",
										customClass: {
											popup: 'swal-custom',
											cancelButton: 'swal-custom-ok-btn'
										}
									});
								}

								// razorpay ajax details
								else if (response.status === "razorpayfailed") {
									Swal.fire({
										icon: "error",
										title: "Oops!.. Network is busy please try again later ! . . .",
										showConfirmButton: false,
										customClass: {
											popup: 'swal-custom',
										},
										timer: 1500
									});
								} else if (response.status === "razorpaytrue") {
									const orderDetails = response.orderDetails
									var options = {
										"key": "rzp_test_iqxC6hlqYjWODY",
										"amount": response.razorpayOrder.amount,
										"currency": "INR",
										"name": "Furnix",
										"description": "Test Transaction",
										"image": "https://example.com/your_logo",
										"order_id": response.razorpayOrder.id,
										"handler": function (response) {
											successgreen(response , orderDetails)
										},
										"prefill": { 
											"name": response.orderDetails.address.name, //your customer's name
											"email": response.orderDetails.userEmail, //your customer's name
											"contact": response.orderDetails.address.number  //Provide the customer's phone number for better conversion rates 
										},
										"notes": {
											"address": "Razorpay Corporate Office"
										},
										"theme": {
											"color": "#000000"
										}
									};
									var rzp1 = new Razorpay(options);
									rzp1.on('payment.failed', function (response) {
										failedpayment(orderDetails);
									});
									rzp1.open();
								}
							}
						})
					} else {
						document.getElementById("selectpayment").style.display = "block";
						setTimeout(() => {
							document.getElementById("selectpayment").style.display = "none";
						}, 2000);
					}
				} else {
					document.getElementById("selectAddressID").style.display = "block";
					setTimeout(() => {
						document.getElementById("selectAddressID").style.display = "none";
					}, 2000);
				}
			}
		}

	}

	function successgreen(response , orderDetails){
		$.ajax({
			url: "/razorpaysuccess",
			method: "post",
			data: {
				response,
				orderDetails
			},
			success: (response) => {
				if(response.status === "true"){
					window.location.href = "/orderSuccessfull"
				} else if (response.status === "network") {
					Swal.fire({
						icon: "error",
						title: "Oops!.. Network is busy please refresh",
						showConfirmButton: false,
						customClass: {
							popup: 'swal-custom',
						},
						timer: 1500
					});
				} else if (response.status === "somthingwrong") {
					Swal.fire({
						icon: "error",
						title: "Oops!.. Somthing worng please try again",
						showConfirmButton: false,
						customClass: {
							popup: 'swal-custom',
						},
						timer: 1500
					});
				}
			} 
		})
	}

	function failedpayment(orderDetails){
		$.ajax({
			url: "/razorpayfailed",
			method: "post",
			data: {
				orderDetails
			},
			success: (response) => {
				if(response.status === "true"){
					window.history.back()
				}
			} 
		})
	}

	function cpnApply(){
    const code = document.getElementById("cpncode");
    if(document.getElementById("applyCoupon").textContent ==="Apply"){
        if(!code.value){
            document.getElementById("cpnerror").textContent="Enter your available coupon code";
            setTimeout(() => {
                document.getElementById("cpnerror").textContent="";
            }, 2000);
        }else{
            $.ajax({
                url: "/applyCoupon",
                method: "post",
                data: {
                    code: code.value
                },
                success: (response) => {
                    if (response.status === "notfound") {
                        document.getElementById("cpnerror").textContent="Coupon not found. please check again your code";
                    } else if(response.status === "minAmount"){
                        document.getElementById("cpnerror").textContent=`The coupon can only be accessed for purchaseing between ₹${response.minamount} to ₹${response.maxAmount}.00`;
                    }  else if(response.status === "okay"){
                        Swal.fire({
                            text: "Coupon applied",
                            showConfirmButton: false,
                            position : "bottom",
                            timer: 1000
                        });
						document.getElementById("cpncode").readOnly = true;
                        document.getElementById("applyCoupon").textContent ="Cancel"
						let newTotal = response.balance;
						newTotal += 100;
						document.getElementById("totalAmount").textContent = "₹" + newTotal + ".00";
						
						const subtotalProduct = document.getElementById("subtotalProduct").textContent
						const SubtotalPrice = parseFloat(subtotalProduct.replace('₹', ''));
						let discountCalculate = parseFloat(SubtotalPrice - response.balance);
                        document.getElementById("cpndiscountamount").textContent ="- ₹"+discountCalculate+'.00'
                    }
                }
            })
        }
    } 
    if(document.getElementById("applyCoupon").textContent ==="Cancel"){
		Swal.fire({
			text: "Coupon removed",
			showConfirmButton: false,
			position : "bottom",
			timer: 1000
		});	
		document.getElementById("cpncode").readOnly = false;
		document.getElementById("cpndiscountamount").textContent ="₹0.00"
		document.getElementById("applyCoupon").textContent ="Apply"
		code.value =""
		let newTotal = document.getElementById("subtotalProduct").textContent;
		newTotal = parseFloat(newTotal.replace('₹', ''));
		newTotal += 100; // this foe adding delivery charge
		document.getElementById("totalAmount").textContent = `₹${newTotal}.00`
    }
}

function clearbox(){
	document.getElementById("cpnerror").textContent =""
}

const searchValue = document.getElementById("myInput")
    let clearTimer;
    searchValue.addEventListener("keyup", () => {
        document.getElementById("prodatas").innerHTML= "";
        document.getElementById("noproduct").style.display = "none"
        clearTimeout(clearTimer);
        clearTimer = setTimeout(() => {
            search();
        }, 1000)
    });
    function search(){
        const searchValue = document.getElementById("myInput").value
        $.ajax({
			url: "/search",
			method: "post",
			data: {
				searchValue
			},
			success: (response) => {
				if (response.status === "okay") {
					document.getElementById("prodatas").innerHTML= ""
                    displaySearch(response.products)
				} else {
					document.getElementById("noproduct").style.display = "block"
				}
			}
		})
    }

    function displaySearch(data) {
    const prodatasDiv = document.getElementById("prodatas");
    prodatasDiv.innerHTML = ""; // Clear previous search results
    
    data.forEach(product => {
        const productDiv = document.createElement("div");
        productDiv.classList.add("d-flex", "align-items-center");

        const imageDiv = document.createElement("div");
        imageDiv.style.width = "80px";
        imageDiv.style.height = "80px";
        imageDiv.style.backgroundColor = "rgb(255, 255, 255)";
        imageDiv.style.marginRight = "30px";
        imageDiv.innerHTML = `<img src="/uploads/${product.images[0]}" alt="product image">`;
        imageDiv.onclick = function() {
            window.location.href = `/productDetailspage?id=${product._id}`;
        };

        const infoDiv = document.createElement("div");
        infoDiv.style.display = "flex";
        infoDiv.style.flexDirection = "column";
        infoDiv.style.justifyContent = "center";
        infoDiv.innerHTML = `
            <h5 style="margin: 0;">${product.name}</h5>
            <p style="margin: 0;">₹${product.regularPrice}.00</p>
        `;

        productDiv.appendChild(imageDiv);
        productDiv.appendChild(infoDiv);
        prodatasDiv.appendChild(productDiv);

        const hr = document.createElement("hr");
        prodatasDiv.appendChild(hr);
    });
}


function cancelsearch(){
    document.getElementById("noproduct").style.display = "none"
    const prodatasDiv = document.getElementById("prodatas").innerHTML = "";
    const searchValue = document.getElementById("myInput").value =""
}




// add address button
	function addAddress() {
        // Inputs
        const name = document.getElementById("name").value.trim();
        const number = document.getElementById("number").value.trim();
        const address = document.getElementById("address").value.trim();
        const pin = document.getElementById("pin").value.trim();
        const state = document.getElementById("state").value.trim();
        const district = document.getElementById("district").value.trim();
        const AddressType = document.getElementById("Address-type").value.trim();
        const Landmark = document.getElementById("Landmark").value.trim();
        const altNumber = document.getElementById("altNumber").value.trim();

        // Errors
        const nameError = document.getElementById("nameError");
        const phoneError = document.getElementById("phoneError");
        const addressError = document.getElementById("addressError");
        const pinError = document.getElementById("pinError");
        const stateError = document.getElementById("stateError");
        const districtError = document.getElementById("districtError");
        const landError = document.getElementById("landError");
        const altError = document.getElementById("altError");

        // Reset all error messages
        nameError.textContent = "";
        phoneError.textContent = "";
        addressError.textContent = "";
        pinError.textContent = "";
        stateError.textContent = "";
        districtError.textContent = "";
        landError.textContent = "";
        altError.textContent = "";

        // Check individual field validations
        if (name === "") {
            nameError.textContent = "Name is required";
        } else if (name.length < 3) {
            nameError.textContent = "Name must have at least 3 characters";
        } else if (!/^[A-Za-z\s]+$/.test(name)) {
            nameError.textContent = "Name can only contain alphabets and spaces";
        }

        if (number === "") {
            phoneError.textContent = "Phone number is required";
        } else if (!/^\d+$/.test(number)) {
            phoneError.textContent = "Phone number must contain only numbers";
        } else if (number.length !== 10) {
            phoneError.textContent = "Phone number must be 10 digits";
        }

        if (address === "") {
            addressError.textContent = "Address is required";
        } else if (!/^[a-zA-Z0-9\s,'-]+$/.test(address)) {
            addressError.textContent = "Enter a valid address";
        }

        if (pin === "") {
            pinError.textContent = "PIN code is required";
        } else if (!/^\d+$/.test(pin)) {
            pinError.textContent = "PIN code must contain only numbers";
        } else if (pin.length !== 6) {
            pinError.textContent = "PIN code must be 6 digits";
        }

        if (district === "") {
            districtError.textContent = "District is required";
        } else if (!/^[a-zA-Z0-9\s,'-]+$/.test(district)) {
            districtError.textContent = "Enter a valid district name";
        }

        if (Landmark === "") {
            landError.textContent = "Landmark is required";
        } else if (!/^[a-zA-Z0-9\s,'-]+$/.test(Landmark)) {
            landError.textContent = "Enter a valid landmark";
        }

        if (altNumber === "") {
            altError.textContent = "Alternate phone number is required";
        } else if (!/^\d+$/.test(altNumber)) {
            altError.textContent = "Alternate phone number must contain only numbers";
        } else if (altNumber.length !== 10) {
            altError.textContent = "Alternate phone number must be 10 digits";
        } else if (altNumber === number) {
            altError.textContent = "Alternate phone number cannot be the same as primary number";
        }


        if (nameError.textContent !== "" || phoneError.textContent !== "" || addressError.textContent !== "" || pinError.textContent !== "" || districtError.textContent !== "" || landError.textContent !== "" || altError.textContent !== "") {
            
        } else {
            $.ajax({
                url: "/address",
                method: "post",
                data: {
                    name,
                    number,
                    address,
                    pin,
                    state,
                    district,
                    AddressType,
                    Landmark,
                    altNumber
                },
                success: (response) => { 
                    if (response.status === "success") {
                        Swal.fire({
                            icon: "success",
                            title: "Changes saved successfully",
                            showConfirmButton: false,
                            customClass: {
                                popup: 'swal-custom',
                            },
                            timer: 1500
                        });
                        setTimeout(() => {
                            window.location.reload();
                        }, 1500);

                    } else if (response.status === "wrong") {
                        Swal.fire({
                            icon: "error",
                            title: "Changes saved successfully",
                            showConfirmButton: false,
                            customClass: {
                                popup: 'swal-custom',
                            },
                            timer: 1500
                        });
                        setTimeout(() => {
                            window.location.reload()
                        }, 1500);
                    }
                }
            })
        }
    }


    // input box clear functions

    function nameClear() {
        document.getElementById("nameError").textContent = ""
    }
    function phoneClear() {
        document.getElementById("phoneError").textContent = ""
    }
    function addressClear() {
        document.getElementById("addressError").textContent = ""
    }
    function pinClear() {
        document.getElementById("pinError").textContent = ""
    }
    function stateClear() {
        document.getElementById("stateError").textContent = ""
    }
    function districtClear() {
        document.getElementById("districtError").textContent = ""
    }
    function landClear() {
        document.getElementById("landError").textContent = ""
    }
    function altClear() {
        document.getElementById("altError").textContent = ""
    }
</script>

</html>